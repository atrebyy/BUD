<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bud | {% block title %}{% endblock %}</title>
  <link
    href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAW7gPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAAAEREQAAAAAAEREREAAAAAEREBERAAAAARAQEBEAAAAAABAQEQAAAAAAEBERAAAAAAERERAAAAAAERERAAAAAAEREBAAAAAAARAQEAAAAAABEBAQEQAAAAEREBERAAAAABERERAAAAAAARERAAAAAAAAEBAAAAD9fwAA+D8AAPAfAADhDwAA5U8AAP1PAAD9DwAA+B8AAPA/AADhfwAA5X8AAOVPAADhDwAA8B8AAPg/AAD9fwAA"
    rel="icon" type="image/x-icon">
  <link href="/static/styles.css" rel="stylesheet">
  <meta name="description"
    content="Bud is a user-friendly and efficient budget tracking web application designed to help you take control of your finances. With Bud, you can effortlessly manage your income and expenses, gain insights into your spending habits, and avoid unexpected financial surprises. Keep a close eye on your budget, set financial goals, and receive timely alerts and notifications to stay on track. Bud simplifies personal finance, making it easier than ever to achieve financial well-being. Start using Bud today to secure your financial future.">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
</head>

<body>
  <header>
    {% if "username" in session %}
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand mb-0 h1" style="color: rgb(87, 197, 13)" href="/">
          <span class="dollar-sign">$</span> B U D
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link nav-link nav-link-ltr" id="dashboard" href="/">Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link nav-link nav-link-ltr" id="profile" href="/profile">Profile</a>
            </li>
            <div class="nav-item position-absolute top-0 end-0">
              <form action="/logout" class="nav-link" method="/post"><button type="submit"
                  class="btn btn-outline-danger"><strong>Log out</strong>
                </button>
              </form>
            </div>
        </div>
      </div>
    </nav>
    {% else %}
    <a class="navbar-brand mb-0 h1 position-absolute top-0 start-50 translate-middle-x" href="/">
      <svg width="200px" height="200px" xmlns="http://www.w3.org/2000/svg"
        viewBox="32.493750000000006 -32.8 435.0125 215.6" style="background: none;" preserveAspectRatio="xMidYMid">
        <defs>
          <filter id="editing-neon" x="-100%" y="-100%" width="300%" height="300%">
            <feFlood flood-color="#14a651" result="flood"></feFlood>
            <feComposite operator="in" in="flood" in2="SourceAlpha" result="color"></feComposite>
            <feFlood flood-color="#14a651" result="flood2"></feFlood>
            <feComposite operator="in" in="flood2" in2="SourceAlpha" result="color2"></feComposite>
            <feMorphology operator="dilate" radius="2" in="color" result="dilate"></feMorphology>
            <feGaussianBlur stdDeviation="6" in="color" result="blur1"></feGaussianBlur>
            <feGaussianBlur stdDeviation="2.5" in="color" result="blur2"></feGaussianBlur>
            <feGaussianBlur stdDeviation="1" in="SourceAlpha" result="blur3"></feGaussianBlur>
            <feGaussianBlur stdDeviation="6" in="dilate" result="blur4"></feGaussianBlur>
            <feConvolveMatrix in="color2" result="conv" order="3,3" divisor="1" kernelMatrix="1 1 1  1 1 1  1 1 1">
            </feConvolveMatrix>
            <feMerge>
              <feMergeNode in="blur1"></feMergeNode>
              <feMergeNode in="blur2"></feMergeNode>
              <feMergeNode in="blur4"></feMergeNode>
              <feMergeNode in="blur3"></feMergeNode>
              <feMergeNode in="blur3"></feMergeNode>
              <feMergeNode in="blur3"></feMergeNode>
              <feMergeNode in="blur3"></feMergeNode>
              <feMergeNode in="conv"></feMergeNode>
              <feMergeNode in="SourceGraphic"></feMergeNode>
            </feMerge>
          </filter>
        </defs>
        <g filter="url(#editing-neon)">
          <g transform="translate(96.83499050140381, 118.21500158309937)">
            <path
              d="M65.51-43.83L65.51-43.83L65.51-43.83Q68.14-43.01 70.31-41.48L70.31-41.48L70.31-41.48Q72.48-39.96 74.00-37.59L74.00-37.59L74.00-37.59Q75.53-35.21 76.35-31.99L76.35-31.99L76.35-31.99Q77.17-28.77 77.17-24.61L77.17-24.61L77.17-20.39L77.17-20.39Q77.17 0 56.78 0L56.78 0L10.78 0L10.78-84.02L54.38-84.02L54.38-84.02Q74.77-84.02 74.77-63.57L74.77-63.57L74.77-62.05L74.77-62.05Q74.77-54.96 72.51-50.48L72.51-50.48L72.51-50.48Q70.25-46.00 65.51-43.83ZM56.43-36.62L22.56-36.62L22.56-11.78L56.43-11.78L56.43-11.78Q61.17-11.78 63.28-14.00L63.28-14.00L63.28-14.00Q65.39-16.23 65.39-20.98L65.39-20.98L65.39-27.48L65.39-27.48Q65.39-32.29 63.28-34.45L63.28-34.45L63.28-34.45Q61.17-36.62 56.43-36.62L56.43-36.62ZM54.02-72.25L22.56-72.25L22.56-48.34L54.84-48.34L54.84-48.34Q59.18-48.52 61.08-50.71L61.08-50.71L61.08-50.71Q62.99-52.91 62.99-57.48L62.99-57.48L62.99-62.99L62.99-62.99Q62.99-67.79 60.88-70.02L60.88-70.02L60.88-70.02Q58.77-72.25 54.02-72.25L54.02-72.25ZM129.96-11.54L129.96-62.40L141.45-62.40L141.45-11.54L173.61-11.54L173.61-62.40L185.16-62.40L185.16 0L173.61 0L173.61-10.55L173.61-10.55Q173.44-8.38 172.44-6.45L172.44-6.45L172.44-6.45Q171.45-4.51 169.89-3.08L169.89-3.08L169.89-3.08Q168.34-1.64 166.35-0.82L166.35-0.82L166.35-0.82Q164.36 0 162.13 0L162.13 0L141.45 0L141.45 0Q139.10 0 136.99-0.91L136.99-0.91L136.99-0.91Q134.88-1.82 133.33-3.37L133.33-3.37L133.33-3.37Q131.78-4.92 130.87-7.03L130.87-7.03L130.87-7.03Q129.96-9.14 129.96-11.54L129.96-11.54ZM240.35-11.54L240.35-50.86L240.35-50.86Q240.35-53.26 241.26-55.37L241.26-55.37L241.26-55.37Q242.17-57.48 243.72-59.03L243.72-59.03L243.72-59.03Q245.27-60.59 247.38-61.49L247.38-61.49L247.38-61.49Q249.49-62.40 251.84-62.40L251.84-62.40L284.00-62.40L284.00-86.43L295.55-86.43L295.55 0L284.00 0L284.00-10.55L284.00-10.55Q283.83-8.38 282.83-6.45L282.83-6.45L282.83-6.45Q281.84-4.51 280.28-3.08L280.28-3.08L280.28-3.08Q278.73-1.64 276.74-0.82L276.74-0.82L276.74-0.82Q274.75 0 272.52 0L272.52 0L251.84 0L251.84 0Q249.49 0 247.38-0.91L247.38-0.91L247.38-0.91Q245.27-1.82 243.72-3.37L243.72-3.37L243.72-3.37Q242.17-4.92 241.26-7.03L241.26-7.03L241.26-7.03Q240.35-9.14 240.35-11.54L240.35-11.54ZM251.84-50.86L251.84-11.54L284.00-11.54L284.00-50.86L251.84-50.86Z"
              fill="none" stroke="#c5ffe2" stroke-width="1.5"></path>
          </g>
        </g>
        <style>
          text {
            font-size: 64px;
            font-family: Arial Black;
            text-anchor: middle;
            text-align: center;
          }
        </style>
      </svg>
    </a>
    {% endif %}

    {%block header %}{% endblock %}
  </header>

  <main class="position-absolute top-50 start-50 translate-middle">
    {%block main %}{% endblock %}
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    {% for message in messages %}
    <br>
    <div id="message"
      class="text-center p-2 text-danger-emphasis bg-danger-subtle border border-danger-subtle rounded-3">
      {{ message }}
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
  </main>
  <footer class="position-absolute bottom-0 start-0 w-100 text-center">
    <div class="container">
      <div class="row justify-content-between">
        <div class="col-md-2">
          <p style="font-size: 10px;">Developed by Ziad Elatreby.</p>
        </div>
        <div class="col-md-2">
          <div class="d-flex justify-content-between">
            <a href="mailto:atrebyy@gmail.com" class="text-white icon-linkk" target="_blank"><i
                class="fas fa-envelope fa-1x"></i></a>
            <a href="https://twitter.com/atrebyy" class="text-white icon-linkk" target="_blank"><i
                class="fab fa-twitter fa-1x"></i></a>
            <a href="https://github.com/atrebyy" class="text-white icon-linkk" target="_blank"><i
                class="fab fa-github fa-1x"></i></a>
            <a href="https://instagram.com/atrebyy" class="text-white icon-linkk" target="_blank"><i
                class="fab fa-instagram fa-1x"></i></a>
            <a href="tel:+201012909011" class="text-white icon-linkk" target="_blank"><i
                class="fas fa-phone fa-1x"></i></a>
          </div>
        </div>
        <div class="col-md-2">
          <p style="font-size: 10px;">CS50x Final Project.</p>
        </div>
      </div>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
    crossorigin="anonymous"></script>
  <script>
    // Get references to your navigation links
    let dashboardLink = document.querySelector("#dashboard");
    let profileLink = document.querySelector("#profile");

    // Function to set the active link based on the current URL
    function setActiveLink() {
      let currentPath = window.location.pathname;
      dashboardLink.classList.remove("active");
      profileLink.classList.remove("active");

      if (currentPath === "/dashboard") {
        dashboardLink.classList.add("active");
      } else if (currentPath === "/profile") {
        profileLink.classList.add("active");
      }
    }

    // Call setActiveLink() initially to set the active link on page load
    setActiveLink();

    // Add click event listeners to your navigation links (optional)
    dashboardLink.addEventListener("click", function (event) {
      setActiveLink();
    });

    profileLink.addEventListener("click", function (event) {
      setActiveLink();
    });


    // Get the message element by its ID
    let messageElement = document.getElementById('message');

    // Function to check and update classes
    function updateMessageClass() {
      let messageText = messageElement.textContent;

      if (messageText.trim().toLowerCase().startsWith('welcome') || messageText.trim().toLowerCase().startsWith('$') || messageText.trim().toLowerCase().startsWith('dashboard') || messageText.trim().toLowerCase().startsWith('was removed') || messageText.trim().toLowerCase().startsWith('password') || messageText.trim().toLowerCase().startsWith('registration')) {
        // Update the classes for success
        messageElement.classList.remove('text-danger-emphasis', 'bg-danger-subtle', 'border-danger-subtle');
        messageElement.classList.add('text-success-emphasis', 'bg-success-subtle', 'border-success-subtle');
      }
      else if (messageText.trim().toLowerCase().startsWith('profile')) {
        messageElement.classList.remove('text-danger-emphasis', 'bg-danger-subtle', 'border-danger-subtle');
        messageElement.classList.add('text-info-emphasis', 'bg-info-subtle', 'border-info-subtle');
      }
    }
    updateMessageClass()

    function removeMessage() {
      messageElement.style.display = 'none'; // Hide the message
    }
    // Set a timeout to call the updateMessageClass function after x seconds
    setTimeout(removeMessage, 5000);


    window.addEventListener("DOMContentLoaded", function () {
      handleTypeChange(); // Call the function when the page is loaded to initially hide the 'Name' fields
    });

    function handleTypeChange() {
      var typeSelect = document.getElementById("type");
      var nameLabel = document.getElementById("name_label");
      var nameInput = document.getElementById("name");
      var actionInput = document.getElementById("action");
      var transactionInput = document.getElementById("transaction");

      if (typeSelect.value === "ASSET" || typeSelect.value === "LIABILITY") {
        nameLabel.style.display = "block";
        nameInput.style.display = "block";
        transactionInput.style.display = "block";
        actionInput.style.display = "none";
      } else if (typeSelect.value === "CASH") {
        actionInput.style.display = "block";
        transactionInput.style.display = "none";
        nameLabel.style.display = "none";
        nameInput.style.display = "none";
      } else {
        nameLabel.style.display = "none";
        nameInput.style.display = "none";
        actionInput.style.display = "none";
        transactionInput.style.display = "none";
      }
    }
  </script>
</body>

</html>